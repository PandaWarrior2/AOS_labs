Лабораторная работа 5. Очереди сообщений
Задание
1. Создать очередь сообщений или получить доступ к уже существующей очереди. Вывести на экран статистическую информацию об очереди сообщений. Поместить несколько сообщений различных типов в очередь.
2. Написать программу, позволяющую читать сообщения из очереди и выводить их на экран. Идентификатор очереди и тип сообщения передается через аргументы командной строки.
3. Модифицировать программу п. 2, позволив ей избежать ожидания в случае отсутствия в очереди сообщений данного типа.
4. Модифицировать программу п. 2, позволив ей принимать первые несколько байтов сообщений произвольных размеров.
5. Написать программу, позволяющую удалять очереди сообщений по идентификатору. Обработать возможные ошибочные ситуации.
6. Написать программы для работы с очередями сообщений в соответствии с моделью клиент-сервер: каждый процесс использует собственную очередь сообщений. Процесс-сервер читает запросы из своей очереди сообщений и посылает ответ процессам-клиентам в их очереди. Процессы-клиенты читают ответ и выводят его в выходной поток. Процессы-клиенты должны передавать процессу-серверу информацию о своих очередях сообщений (куда записывать ответ).
7. Осуществить при помощи программ п. 6. обмен сообщениями между несколькими пользователями, при условии, что каждому пользователю предназначены сообщения любого или определенного типа (по договоренности). Будут ли примеры с очередями сообщений "приводить себя в порядок"? Что произойдет, если прервать процесс-сервер с помощью клавиши CTRL-C?
8. Модифицировать программы п. 6 так, чтобы они завершались корректно и в случае прерывания по CTRL-C.
9. Модифицировать программы п. 6 так, чтобы использовались две очереди: одна для запросов к серверу и одна для всех ответов от сервера к любому клиенту.
10. Еще раз модифицировать эти программы так, чтобы использовалась только одна очередь сообщений и для запросов к серверу, и для всех ответов.
11. Написать программу, иллюстрирующую возможность синхронизации процессов при помощи очередей сообщений.

